title: macOS 10.12.1にあげたらlibcryptoが見つからない
date: 2016-11-02

macOSをSierraにあげました。

その後xcode8.1のインストールをして、omacのビルドをするとlibcryptoが見つからずエラーになりました。

```
% ocaml setup.ml -build 
Finished, 0 targets (0 cached) in 00:00:00.
+ /Users/hoge/.opam/4.03.0/bin/ocamlfind ocamlopt -g -linkpkg -package cohttp -package cohttp.lwt -package conduit -package cryptokit -package lwt -package str src/omac.cmx src/main.cmx -o src/main.native
ld: library not found for -lcrypto
clang: error: linker command failed with exit code 1 (use -v to see invocation)
File "caml_startup", line 1:
Error: Error during linking
Command exited with code 2.
Compilation unsuccessful after building 7 targets (6 cached) in 00:00:01.
E: Failure("Command ''/Users/hoge/.opam/4.03.0/bin/ocamlbuild' src/main.native src/test_main.native -tag debug -tag tests' terminated with error code 10")
make: *** [build] Error 1
```

homebrewで入れてるのでclangにパスを渡すため、LIBRARY\_PATH環境変数に値を入れます。

```
% export LIBRARY_PATH=$HOME/homebrew/Cellar/openssl/1.0.2j/lib
% ocaml setup.ml -build 
Finished, 0 targets (0 cached) in 00:00:00.
Finished, 11 targets (6 cached) in 00:00:01.
```

これでビルドできるようになりました。

あれ？てことはいままでsystem側のlibにリンクしてたんだろうか。
